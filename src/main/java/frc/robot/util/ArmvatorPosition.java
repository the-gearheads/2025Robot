package frc.robot.util;

import edu.wpi.first.math.geometry.Translation2d;

// This class is autogenerated from avtrajopt/generateungeneratedtrajs.py. Do not edit.
public enum ArmvatorPosition {
  L1(new Translation2d(0.715912, 0.647364)),
  L2(new Translation2d(0.625565, 0.830153)),
  L3(new Translation2d(0.100776, 0.958819)),
  L4(new Translation2d(0.176904, 1.683129)),
  AlgaeL3(new Translation2d(0.0, 1.04818)),
  AlgaeL2(new Translation2d(0.80958, 0.921202)),
  HP(new Translation2d(0.770843, 0.580872)),
  GROUND_INTAKE(new Translation2d(0.983797, 0.291414)),
  PROCESSOR(new Translation2d(0.832072, 0.48915)),
  NET(new Translation2d(0.0, 1.9419)),
  STOW(new Translation2d(0.620419, 0.739386));

  public final Translation2d endeffPos;

  private ArmvatorPosition(Translation2d endeffPos) {
    this.endeffPos = endeffPos;
  }

  public static ArmvatorPosition getNearest(Translation2d endeffPos) {
    ArmvatorPosition best = null;
    double bestDist = Double.POSITIVE_INFINITY;
    for (ArmvatorPosition pos : ArmvatorPosition.values()) {
      double dist = pos.endeffPos.getDistance(endeffPos);
      if (dist < bestDist) {
        best = pos;
        bestDist = dist;
      }
    }
    return best;
  }

  public static ArmvatorPosition getNearestStateSpace (Translation2d endeffPos) {
    var currentElev = endeffPos.getNorm();
    var currentPivot = Math.atan2(endeffPos.getY(), endeffPos.getX());
    Translation2d elevPivotStateSpace = new Translation2d(currentElev, currentPivot);

    ArmvatorPosition best = null;
    double bestDist = Double.POSITIVE_INFINITY;
    for (ArmvatorPosition pos : ArmvatorPosition.values()) {
      var elevatorLength = pos.endeffPos.getNorm();
      var pivotAngle = Math.atan2(pos.endeffPos.getY(), pos.endeffPos.getX());
      Translation2d elevPivotStateSpacePos = new Translation2d(elevatorLength, pivotAngle);
      double dist = elevPivotStateSpace.getDistance(elevPivotStateSpacePos);
      if (dist < bestDist) {
        best = pos;
        bestDist = dist;
      }
    }
    return best;
  }
}
